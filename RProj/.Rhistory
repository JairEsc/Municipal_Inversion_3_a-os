library(sf)
municipios=read_sf("../../../Reutilizables/Cartografia/municipiosjair.shp")
demos=read.csv("../../../Reutilizables/Demograficos/iter_13_cpv2020/conjunto_de_datos/conjunto_de_datos_iter_13CSV20.csv")
demos=demos|>
dplyr::select(MUN,NOM_MUN,LOC,POBTOT) |>
dplyr::filter(MUN>0) |>
dplyr::filter(LOC==0)
View(demos)
demos=demos|>
dplyr::select(MUN,NOM_MUN,LOC,POBTOT) |>
dplyr::filter(MUN>0) |>
dplyr::filter(LOC==0)|>
dplyr::mutate(MUN=sprintf("%03d"))
demos=demos|>
dplyr::select(MUN,NOM_MUN,LOC,POBTOT) |>
dplyr::filter(MUN>0) |>
dplyr::filter(LOC==0)|>
dplyr::mutate(MUN=sprintf(MUN,"%03d"))
demos=demos|>
dplyr::select(MUN,NOM_MUN,LOC,POBTOT) |>
dplyr::filter(MUN>0) |>
dplyr::filter(LOC==0)|>
dplyr::mutate(MUN=sprintf("%03d",MUN))
View(demos)
municipios=municipios |>
dplyr::select(CVEGEO,NOM_MUN,CVE_MUN)
municipios=merge(municipios,demos,by.x='CVE_MUN',by.y='MUN')
View(municipios)
municipios=read_sf("../../../Reutilizables/Cartografia/municipiosjair.shp")
demos=read.csv("../../../Reutilizables/Demograficos/iter_13_cpv2020/conjunto_de_datos/conjunto_de_datos_iter_13CSV20.csv")
demos=demos|>
dplyr::select(MUN,NOM_MUN,LOC,POBTOT) |>
dplyr::filter(MUN>0) |>
dplyr::filter(LOC==0)|>
dplyr::mutate(MUN=sprintf("%03d",MUN)) |>
dplyr::select(-NOM_MUN)
municipios=municipios |>
dplyr::select(CVEGEO,NOM_MUN,CVE_MUN)
municipios=merge(municipios,demos,by.x='CVE_MUN',by.y='MUN',all.x=T)
municipios$inv_per_cap_dir=rnorm(84,mean = 150000,sd=5000)
municipios$inv_per_cap_indir=rnorm(84,mean = 1500,sd=50)
View(municipios)
st_write(municipios,"geojson_hgo.geojson",driver = "geojson")
z=read.csv("../Datos/SIPDUS_Municipios_2022-2025.csv")
View(z)
gsub("//.",replacement = ";",z$Obra)
gsub("//.",replacement = ";",z$Obra)[1]
gsub("//.",replacement = ";",z$Obra)[1:5]
gsub("//,",replacement = ";",z$Obra)[1:5]
gsub("\\,",replacement = ";",z$Obra)[1:5]
z$Obra=gsub("\\,",replacement = ";",z$Obra)[1:5]
z$Obra=gsub("\\,",replacement = ";",z$Obra)
z=read.csv("../Datos/SIPDUS_Municipios_2022-2025.csv")
z$Obra=gsub("\\,",replacement = ";",z$Obra)
z |> dplyr::select(Rubro,Ejercicio,NOM_MUN,InversiÃ³n,Habitantes.beneficiados,Obra) |>
write.csv("../Datos/SIPDUS_2022-2025.csv")
View(municipios)
z$NOM_MUN[z$NOM_MUN=='Cobertura Estatal']
